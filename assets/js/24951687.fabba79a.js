"use strict";(self.webpackChunkisolate_react_docs=self.webpackChunkisolate_react_docs||[]).push([[969],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),d=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},l=function(e){var t=d(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=d(n),m=a,f=u["".concat(c,".").concat(m)]||u[m]||p[m]||i;return n?r.createElement(f,o(o({ref:t},l),{},{components:n})):r.createElement(f,o({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var d=2;d<i;d++)o[d]=n[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2485:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return d},toc:function(){return l},default:function(){return u}});var r=n(3117),a=n(102),i=(n(7294),n(3905)),o=["components"],s={title:"Dependencies",sidebar_label:"Dependencies"},c=void 0,d={unversionedId:"More/Dependencies/overview",id:"More/Dependencies/overview",title:"Dependencies",description:"A guide to building software without losing your mind.",source:"@site/docs/More/Dependencies/00-overview.md",sourceDirName:"More/Dependencies",slug:"/More/Dependencies/overview",permalink:"/isolate-react/More/Dependencies/overview",editUrl:"https://github.com/davidmfoley/isolate-react/docusaurus/docs/More/Dependencies/00-overview.md",tags:[],version:"current",sidebarPosition:0,frontMatter:{title:"Dependencies",sidebar_label:"Dependencies"},sidebar:"tutorialSidebar",previous:{title:"Why?",permalink:"/isolate-react/More/why"},next:{title:"The best dependency is no dependency",permalink:"/isolate-react/More/Dependencies/dependency-removal"}},l=[{value:"Important note",id:"important-note",children:[{value:"This section is a work-in-progress!",id:"this-section-is-a-work-in-progress",children:[],level:3}],level:2},{value:"What is a dependency?",id:"what-is-a-dependency",children:[],level:2},{value:"How does this affect us?",id:"how-does-this-affect-us",children:[{value:"Hard dependencies make our code harder to understand",id:"hard-dependencies-make-our-code-harder-to-understand",children:[],level:3},{value:"Hard dependencies make testing more difficult",id:"hard-dependencies-make-testing-more-difficult",children:[],level:3}],level:2},{value:"What can we do?",id:"what-can-we-do",children:[],level:2}],p={toc:l};function u(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"A guide to building software without losing your mind."),(0,i.kt)("h2",{id:"important-note"},"Important note"),(0,i.kt)("h3",{id:"this-section-is-a-work-in-progress"},"This section is a work-in-progress!"),(0,i.kt)("h2",{id:"what-is-a-dependency"},"What is a dependency?"),(0,i.kt)("p",null,"Often in our programs, when module A needs to collaborate with module B, it imports that module and uses its exports directly."),(0,i.kt)("p",null,"For example, let's say we have a function that looks up a user from our database:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// database.js\n\nconst db = connectToDatabase()\n\nexport const findUserByEmail = async (email) => {\n  const result = await db.query(`select * from users where email = $1`, [email])\n\n  return result.rows[0] || null\n}\n")),(0,i.kt)("p",null,"... and we want to test another function that uses the database function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'// api.js\n\nimport { findUserByEmail } from \'./database\'\n\nexport const getUserName = async (email) => {\n  const user = await findUserByEmail(email)\n  if (!user) return "User Not Found"\n  if (!user.name) return "No Name Provided"\n  if (user.title) return `${user.title}. ${user.name}`\n\n  return user.name\n}\n')),(0,i.kt)("p",null,"We can say that the function ",(0,i.kt)("inlineCode",{parentName:"p"},"getUserName")," ",(0,i.kt)("em",{parentName:"p"},"depends on")," the function ",(0,i.kt)("inlineCode",{parentName:"p"},"findUserByEmail"),"."),(0,i.kt)("p",null,'We can further say that this is a "hard" or "static" dependency -- one that is "hard-wired" and not easily replaced.'),(0,i.kt)("h2",{id:"how-does-this-affect-us"},"How does this affect us?"),(0,i.kt)("h3",{id:"hard-dependencies-make-our-code-harder-to-understand"},"Hard dependencies make our code harder to understand"),(0,i.kt)("p",null,"The above example is simple: a function that depends on a single other function. In many applications, the dependencies are much more complex. At runtime, a single request will be serviced by many objects, and each of those objects can have many exposed methods, with only a few of them used. "),(0,i.kt)("p",null,"This leads to unnecessary coupling between objects."),(0,i.kt)("p",null,'The techniques used to make our hard dependencies "softer" also tend to have the effect of making their interactions more ',(0,i.kt)("em",{parentName:"p"},"explicit"),". "),(0,i.kt)("h3",{id:"hard-dependencies-make-testing-more-difficult"},"Hard dependencies make testing more difficult"),(0,i.kt)("p",null,"If we want to test the logic in ",(0,i.kt)("inlineCode",{parentName:"p"},"getUserName")," ",(0,i.kt)("em",{parentName:"p"},"without")," a database, we need a way to give it a fake implementation of ",(0,i.kt)("inlineCode",{parentName:"p"},"findUserByEmail"),', sometimes called a "mock". This can only be accomplished using a "file mock", which is a very complex technique that ',(0,i.kt)("em",{parentName:"p"},"increases")," the coupling of tests to the implementation."),(0,i.kt)("h2",{id:"what-can-we-do"},"What can we do?"),(0,i.kt)("p",null,'"Inverting" or "injecting" a dependency means designing our software so that the dependency (',(0,i.kt)("inlineCode",{parentName:"p"},"findUserByEmail"),") can be specified outside of its usage (",(0,i.kt)("inlineCode",{parentName:"p"},"getUserName"),")."),(0,i.kt)("p",null,'This sounds fancy, and there are a lot of fancy tools that provide "dependency injection".\nHowever, most of the time no additional tools are necessary -- we just need to make some simple changes to the way we design our functions and objects.'),(0,i.kt)("p",null,"The following pages explain many of the common techniques  we can use to invert dependencies in javascript and typescript. Some of the techniques are specific to react, and some are generally applicable to all javascript code."))}u.isMDXComponent=!0}}]);